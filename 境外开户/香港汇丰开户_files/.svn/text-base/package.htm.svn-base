<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>net</title>
		<script type="text/javascript" src="package_data/tangram-1.js"></script>
		<script type="text/javascript" src="package_data/base.js"></script>
	<script src="package_data/test" type="text/javascript"></script><script src="package_data/test_003" type="text/javascript"></script><script src="package_data/test_004" type="text/javascript"></script><script src="package_data/test_005" type="text/javascript"></script><script src="package_data/test_006" type="text/javascript"></script><script src="package_data/test_002" type="text/javascript"></script></head>
	<body>
		<script type="text/javascript">var url=window.location.href;var peerURI=decodeURIComponent(baidu.url.getQueryValue(url,"peer")),relayURI=decodeURIComponent(baidu.url.getQueryValue(url,"relay"));var storagePort=baidu.url.getQueryValue(url,"storageport");var netPort=baidu.url.getQueryValue(url,"netport");var syncPort=baidu.url.getQueryValue(url,"syncPort");var username=decodeURIComponent(baidu.url.getQueryValue(url,"username"));var guid=baidu.url.getQueryValue(url,"guid");var xpc=new CrossPageChannel({peerURI:peerURI,replayURI:relayURI});var xmlHttpPool={};function netServiceHandler(d){var a=new Date().getTime();switch(d.method.toLowerCase()){case"post":xmlHttpPool[a]=baidu.ajax.post(d.url,d.data,function(e){if(xmlHttpPool[a]){delete xmlHttpPool[a]}xpc.send(netPort,{callback:d.callback,responseText:e.responseText})});break;case"get":xmlHttpPool[a]=baidu.ajax.get(d.url,function(e){if(xmlHttpPool[a]){delete xmlHttpPool[a]}xpc.send(netPort,{callback:d.callback,responseText:e.responseText})});break;case"getbyserver":baidu.sio.callByServer(d.url,function(e){xpc.send(netPort,{callback:d.callback,responseText:baidu.json.encode(e)})});break;case"abort":for(var c in xmlHttpPool){try{xmlHttpPool[c].abort()}catch(b){}delete xmlHttpPool[a]}break}}xpc.register(netPort,netServiceHandler);var eKey=baidu.cookie.get("bduss");var storageSync=new baidu.more.storage.Store("mulansync",{eKey:eKey});baidu.more.sync.init(xpc,storageSync,{syncPort:syncPort});var storageMap={};function storageServiceHandler(a){storageMap[a.key]=storageMap[a.key]||new baidu.more.storage.Store("mulanstorage",{eKey:eKey});var b=storageMap[a.key];switch(a.method.toLowerCase()){case"set":b.set(a.key,a.value,function(c,d){xpc.send(storagePort,{callback:a.callback,status:c,value:d})},a.params);break;case"get":b.get(a.key,function(c,d){xpc.send(storagePort,{callback:a.callback,status:c,value:d})},a.params);break;case"remove":b.remove(a.key,function(c,d){xpc.send(storagePort,{callback:a.callback,status:c,value:d})},a.params);break}}xpc.register(storagePort,storageServiceHandler);baidu.on(window,"unload",function(){for(var a in xmlHttpPool){var b=xmlHttpPool[a];b.onreadystatechange=new Function();b.abort();b=null}xmlHttpPool=null});</script>
	
</body></html>